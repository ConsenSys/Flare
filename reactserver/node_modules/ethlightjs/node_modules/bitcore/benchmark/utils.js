'use strict';

var benchmark = require('benchmark');
var bitcore = require('..');
var async = require('async');

var maxTime = 20;

console.log('Benchmarking Utils');
console.log('---------------------------------------');

async.series([
  function(next) {
    
    var props = {};
    for (var i = 0; i < 1000; i++) {
      props[i + '-key'] = Math.round(Math.random() * 1000);
    }

    function defineImmutable() {
      var obj = {};
      bitcore.util.js.defineImmutable(obj, props);
    }

    var suite = new benchmark.Suite();
    suite.add('bitcore.utils.js.defineImmutable', defineImmutable, {maxTime: maxTime});
    suite
      .on('cycle', function(event) {
        console.log(String(event.target));
      })
      .on('complete', function() {
        console.log('Done');
        console.log('----------------------------------------------------------------------');
        next();
      })
      .run();
  }
], function(err) {
  if(err) {
    throw err;
  }
  console.log('Finished');
});
